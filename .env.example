# ChittyChronicle Environment Variables
# Copy this file to .env and configure for your environment

#===============================================================================
# REQUIRED VARIABLES (Application will not function without these)
#===============================================================================

# Database Configuration (REQUIRED)
DATABASE_URL=postgresql://user:password@localhost:5432/chittychronicle

# Server Configuration
NODE_ENV=development
PORT=5000

# Frontend API Configuration (REQUIRED for production)
# In development: Leave empty to use relative URLs
# In production: Set to backend API URL
VITE_API_BASE_URL=

# Session Configuration (REQUIRED - auto-generated if not set)
SESSION_SECRET=generate-a-long-random-string-here

#===============================================================================
# AI SERVICES (REQUIRED for AI-powered features)
#===============================================================================

# Anthropic API Key (REQUIRED for contradiction detection)
# Without this, contradiction detection will use demo/fallback analysis
ANTHROPIC_API_KEY=your-anthropic-api-key

#===============================================================================
# CHITTYID AUTHENTICATION (Hybrid: Falls back to Replit Auth if not configured)
#===============================================================================

# ChittyID OAuth Client Credentials
# If not set: Falls back to Replit Auth for development
CHITTYID_CLIENT_ID=your-chittyid-client-id
CHITTYID_CLIENT_SECRET=your-chittyid-client-secret
CHITTYID_ISSUER_URL=https://auth.chitty.com/oidc
CHITTYID_REDIRECT_URI=http://localhost:5000/auth/callback

# ChittyID Service Token (REQUIRED for ChittyID minting)
# Without this: Cannot mint new ChittyIDs (validation will fail)
# ChittyIDs must NEVER be generated locally - they come from id.chitty.cc
CHITTYID_SERVICE_TOKEN=your-chittyid-service-token

# Replit Auth Configuration (Fallback when ChittyID unavailable)
REPLIT_DOMAINS=your-repl-domain.replit.dev
REPL_ID=your-repl-id
ISSUER_URL=https://replit.com/oidc

#===============================================================================
# OPTIONAL CHITTYOS INTEGRATIONS (Graceful fallback if not configured)
#===============================================================================

# ChittyPM Project Management Integration (OPTIONAL)
# If not set: Manual task management (no auto-sync)
# Fallback: User enters tasks/deadlines manually
CHITTYPM_API_URL=http://localhost:5001/api
CHITTYPM_WS_URL=ws://localhost:5001/ws

# ChittyConnect Context Sharing (OPTIONAL)
# If not set: Local JSONL logging only (no cross-service sharing)
# Fallback: Events logged to reports/context-events.jsonl
CHITTYCONNECT_BASE_URL=https://connect.chitty.cc
CHITTYCHRONICLE_SERVICE_TOKEN=your-service-token

# ChittyBeacon Alerting Service (OPTIONAL)
# If not set: Basic WebSocket alerts only (no email/SMS/push)
# Fallback: Web-only alerting via WebSocket
CHITTY_BEACON_API_URL=https://api.chittybeacon.com/v1
CHITTY_BEACON_WS_URL=wss://beacon.chittybeacon.com

# ChittyTrust / ChittyChain (OPTIONAL)
# If not set: Trust scoring works, but no blockchain attestation
# Fallback: Trust analysis without immutable audit trail
CHITTYCHAIN_BASE_URL=https://chain.chitty.cc
CHITTY_TRUST_API_URL=https://api.chittytrust.com/v1
CHITTY_TRUST_API_KEY=your-trust-api-key

#===============================================================================
# FILE STORAGE (OPTIONAL)
#===============================================================================

# Google Cloud Storage (OPTIONAL)
# If not set: File uploads disabled
# Fallback: Timeline entries without file attachments
GCS_BUCKET_NAME=chittychronicle-uploads
GCS_PROJECT_ID=your-gcp-project-id
GCS_KEY_FILE=/path/to/service-account-key.json
GOOGLE_CLOUD_PROJECT=your-gcp-project-id
GOOGLE_CLOUD_STORAGE_BUCKET=chittychronicle-uploads

#===============================================================================
# NOTIFICATION DELIVERY (OPTIONAL - Currently only WebSocket works)
#===============================================================================

# Email Configuration (PLANNED - Not yet implemented)
# Status: Console.log placeholder only
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=notifications@chitty.com
SMTP_PASS=your-smtp-password
EMAIL_FROM=ChittyChronicle <notifications@chitty.com>

# SMS Configuration (PLANNED - Not yet implemented)
# Status: Console.log placeholder only
TWILIO_ACCOUNT_SID=your-twilio-sid
TWILIO_AUTH_TOKEN=your-twilio-token
TWILIO_PHONE_NUMBER=+1234567890

#===============================================================================
# DEPLOYMENT & MONITORING (OPTIONAL)
#===============================================================================

# Cloudflare Configuration (OPTIONAL)
CLOUDFLARE_ACCOUNT_ID=your-cloudflare-account-id
CLOUDFLARE_API_TOKEN=your-cloudflare-api-token
CLOUDFLARE_ZONE_ID=your-zone-id

# Redis Configuration (OPTIONAL)
REDIS_URL=redis://localhost:6379

# Monitoring (OPTIONAL)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
DATADOG_API_KEY=your-datadog-api-key

#===============================================================================
# CHITTYOS SERVICE REGISTRY (OPTIONAL)
#===============================================================================

# Chronicle Service Identity
CHITTYCHRONICLE_BASE_URL=http://localhost:5000
CHITTYCHRONICLE_PUBLIC_URL=http://localhost:5000
CHITTYCHRONICLE_SERVICE_ID=chitty.cc/chronicle

# Central ChittyOS Services
CHITTYREGISTRY_BASE_URL=https://registry.chitty.cc
CHITTYROUTER_BASE_URL=https://router.chitty.cc
CHITTYID_BASE_URL=https://id.chitty.cc
CHITTYLEDGER_BASE_URL=https://ledger.chitty.cc
CHITTYVERIFY_BASE_URL=https://verify.chitty.cc
CHITTYCERTIFY_BASE_URL=https://certify.chitty.cc
CHITTYASSETS_BASE_URL=https://assets.chitty.cc
CHITTYCANON_BASE_URL=https://canon.chitty.cc

# MCP Integration (OPTIONAL)
CHITTYMCP_BASE_URL=https://mcp.chitty.cc
ENABLE_MCP_INTEGRATION=true

#===============================================================================
# FEATURE FLAGS (Control optional functionality)
#===============================================================================

# Core Features
ENABLE_WEBSOCKET=true
ENABLE_AI_ANALYSIS=true
ENABLE_EXPORT_PDF=true

# Integration Features (automatically disabled if services unavailable)
USE_CHITTYPM_MOCKS=false  # Set true to use mock ChittyPM in development
AUTH_PROVIDER=chittyid    # Options: chittyid, replit (auto-detects if not set)
